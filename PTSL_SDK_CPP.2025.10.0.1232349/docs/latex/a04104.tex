\hypertarget{a04104_autotoc_md20}{}\doxysubsection{Overview}\label{a04104_autotoc_md20}
Pro Tools 2025.\+10 release introduced batch job operations -\/ a set of commands which allow client to wrap a long-\/running operation into a user-\/friendly Pro Tools modal dialog and restrict any user actions while it\textquotesingle{}s running, manage progress bar and completion.\hypertarget{a04104_autotoc_md21}{}\doxysubsection{Creating batch job}\label{a04104_autotoc_md21}
Use {\ttfamily CId\+\_\+\+Create\+Batch\+Job} command to initiate a Pro Tools modal dialog and start batch job. There are several options that let you customize its behavior\+:
\begin{DoxyItemize}
\item {\ttfamily is\+\_\+cancelable} -\/ whether a user-\/facing batch job modal dialog can be cancelled using a {\itshape Cancel} button.
\item {\ttfamily cancel\+\_\+on\+\_\+failure} -\/ controls if overall operation is considered failed if any sub-\/command has failed. If this occurs, a {\ttfamily Batch\+Job\+Status\+Changed} event is triggerd informing batch job status has changed to {\ttfamily BJStatus\+\_\+\+Failed}.
\item {\ttfamily timeout} -\/ a value in milliseconds that automatically finishes stale batch job, i.\+e. that didn\textquotesingle{}t receive commands for specified amount of time. 0 means \textquotesingle{}{\itshape no timeout}\textquotesingle{}. If timeout happens, a {\ttfamily Batch\+Job\+Status\+Changed} event is triggered informing batch job status has changed to {\ttfamily BJStatus\+\_\+\+Timed\+Out}.
\end{DoxyItemize}

Successful execution of {\ttfamily CId\+\_\+\+Create\+Batch\+Job} request returns batch job ID that can be used in other batch job commands\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{// response}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}id"{}: "{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Subsequent commands depend on client needs. You can call other PTSL commands as a part of batch job, like import audio, create clips, spot clips on a timeline, etc. To make PTSL command part of batch job include a {\ttfamily batch\+\_\+job\+\_\+header} into a request header with specified batch job id, like so\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}header"{}: \{}
\DoxyCodeLine{    ...}
\DoxyCodeLine{    "{}versioned\_request\_header\_json"{}: "{}\{ \(\backslash\)"{}batch\_job\_header\(\backslash\)"{}: \{ \(\backslash\)"{}id\(\backslash\)"{}: \(\backslash\)"{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71\(\backslash\)"{} \} \}"{}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
 Keep in mind, that while batch job is running, every other command without an appropriate batch job header will be postponed until batch job is finished. The exemptions are\+:
\begin{DoxyItemize}
\item {\ttfamily CId\+\_\+\+Get\+Task\+Status}
\item {\ttfamily CId\+\_\+\+Get\+PTSLVersion}
\item {\ttfamily CId\+\_\+\+Register\+Connection}
\item {\ttfamily CId\+\_\+\+Complete\+Batch\+Job}
\item {\ttfamily CId\+\_\+\+Get\+Batch\+Job\+Status}
\item {\ttfamily CId\+\_\+\+Subscribe\+To\+Events}
\item {\ttfamily CId\+\_\+\+Poll\+Events}
\item {\ttfamily CId\+\_\+\+Unsubscribe\+From\+Events}
\end{DoxyItemize}\hypertarget{a04104_autotoc_md22}{}\doxysubsection{Incrementing progress}\label{a04104_autotoc_md22}
When working with batch job, you will likely want to update the modal dialog progress bar value to let the user know about the time remaining for batch job to complete. There is no dedicated command for that, however progress value can be passed in batch job header for any incoming command for ongoing batch job\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}header"{}: \{}
\DoxyCodeLine{    ...}
\DoxyCodeLine{    "{}versioned\_request\_header\_json"{}: "{}\{ \(\backslash\)"{}batch\_job\_header\(\backslash\)"{}: \{ \(\backslash\)"{}id\(\backslash\)"{}: \(\backslash\)"{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71\(\backslash\)"{}, \(\backslash\)"{}progress\(\backslash\)"{}: 15 \} \}"{}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
 Once command is finished, progress bar will update its value. Acceptable progress value range is \mbox{[}0, 100\mbox{]} and indicate a percentage of completion and not an increment to current progress. Note that new progress value cannot be lower than current progress value.

One may also want to change progress without doing actual work on Pro Tools side. In this case, use a dummy command call with batch\+\_\+job\+\_\+header filled. For example, {\ttfamily CId\+\_\+\+Host\+Ready\+Check} will work for this purpose.\hypertarget{a04104_autotoc_md23}{}\doxysubsection{Completing or canceling batch job}\label{a04104_autotoc_md23}
Once operation is ready to be completed make a {\ttfamily CId\+\_\+\+Complete\+Batch\+Job} request to initiate completion and close modal dialog. Once batch job is completed, a {\ttfamily Batch\+Job\+Status\+Changed} event is triggered informing batch job status has changed to {\ttfamily BJStatus\+\_\+\+Completed}. Note that you can not complete batch job that has a running command. 
\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}command"{}: "{}CId\_CompleteBatchJob"{},}
\DoxyCodeLine{  "{}version"{}: 2025,}
\DoxyCodeLine{  "{}version\_minor"{}: 10,}
\DoxyCodeLine{  "{}version\_revision"{}: 0}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}id"{}: "{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}


If you need to cancel batch job operation, use {\ttfamily CId\+\_\+\+Cancel\+Batch\+Job} request. Canceling will wait for any ongoing command to be finished and cancel batch job failing any other pending batch job commands. Once batch job is canceled, a {\ttfamily Batch\+Job\+Status\+Changed} event is triggered informing batch job status has changed to {\ttfamily BJStatus\+\_\+\+Canceled}.\hypertarget{a04104_autotoc_md24}{}\doxysubsection{Obtaining batch job status}\label{a04104_autotoc_md24}
While batch job exists, you can ask for its current status using {\ttfamily CId\+\_\+\+Get\+Batch\+Job\+Status} request.


\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}command"{}: "{}CId\_GetBatchJobStatus"{},}
\DoxyCodeLine{  "{}version"{}: 2025,}
\DoxyCodeLine{  "{}version\_minor"{}: 10,}
\DoxyCodeLine{  "{}version\_revision"{}: 0}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}id"{}: "{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Batch job is considered as {\ttfamily BJStatus\+\_\+\+Pending} if it haven\textquotesingle{}t receive any commands to execute yet. When at least one command is added, batch job status is changed to {\ttfamily BJStatus\+\_\+\+Running}. Batch job can finish with one of these statuses\+: {\ttfamily BJStatus\+\_\+\+Completed}, {\ttfamily BJStatus\+\_\+\+Canceled}, {\ttfamily BJStatus\+\_\+\+Timed\+Out} or {\ttfamily BJStatus\+\_\+\+Failed}.\hypertarget{a04104_autotoc_md25}{}\doxysubsection{Complete example\+:}\label{a04104_autotoc_md25}
\hypertarget{a04104_autotoc_md26}{}\doxysubsubsection{1. Creating a batch job}\label{a04104_autotoc_md26}

\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}command"{}: "{}CId\_CreateBatchJob"{},}
\DoxyCodeLine{  "{}version"{}: 2025,}
\DoxyCodeLine{  "{}version\_minor"{}: 10,}
\DoxyCodeLine{  "{}version\_revision"{}: 0}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}job"{}: \{}
\DoxyCodeLine{    "{}name"{}: "{}A long-\/running operation"{},}
\DoxyCodeLine{    "{}description"{}: "{}This will take a while, Please, wait."{},}
\DoxyCodeLine{    "{}timeout"{}: 50000,}
\DoxyCodeLine{    "{}is\_cancelable"{}: true,}
\DoxyCodeLine{    "{}cancel\_on\_failure"{}: false}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{a04104_autotoc_md27}{}\doxysubsubsection{2 Moving the progress bar}\label{a04104_autotoc_md27}
\doxyparagraph*{2.\+1 Using a sub-\/command call}


\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}header"{}: \{}
\DoxyCodeLine{    "{}command"{}: "{}CId\_ExportMix"{},}
\DoxyCodeLine{    "{}version"{}: 2025,}
\DoxyCodeLine{    "{}version\_minor"{}: 10,}
\DoxyCodeLine{    "{}version\_revision"{}: 0,}
\DoxyCodeLine{    "{}versioned\_request\_header\_json"{}: "{}\{ \(\backslash\)"{}batch\_job\_header\(\backslash\)"{}: \{ \(\backslash\)"{}id\(\backslash\)"{}: \(\backslash\)"{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71\(\backslash\)"{}, \(\backslash\)"{}progress\(\backslash\)"{}: 15 \} \}"{}}
\DoxyCodeLine{  \},}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}offline\_bounce"{}: "{}TB\_False"{},}
\DoxyCodeLine{  "{}audio\_info"{}: \{\},}
\DoxyCodeLine{  "{}location\_info"{}: \{\}}
\DoxyCodeLine{\}}

\end{DoxyCode}


\doxyparagraph*{2.\+2 Using a \char`\"{}fake\char`\"{} call}


\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}header"{}: \{}
\DoxyCodeLine{    "{}command"{}: "{}CId\_HostReadyCheck"{},}
\DoxyCodeLine{    "{}version"{}: 2025,}
\DoxyCodeLine{    "{}version\_minor"{}: 10,}
\DoxyCodeLine{    "{}version\_revision"{}: 0,}
\DoxyCodeLine{    "{}versioned\_request\_header\_json"{}: "{}\{ \(\backslash\)"{}batch\_job\_header\(\backslash\)"{}: \{ \(\backslash\)"{}id\(\backslash\)"{}: \(\backslash\)"{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71\(\backslash\)"{}, \(\backslash\)"{}progress\(\backslash\)"{}: 12 \} \}"{}}
\DoxyCodeLine{  \},}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{ \}}

\end{DoxyCode}
\hypertarget{a04104_autotoc_md28}{}\doxysubsubsection{3. Getting batch job status}\label{a04104_autotoc_md28}

\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}header"{}: \{}
\DoxyCodeLine{    "{}command"{}: "{}CId\_GetBatchJobStatus"{},}
\DoxyCodeLine{    "{}version"{}: 2025,}
\DoxyCodeLine{    "{}version\_minor"{}: 10,}
\DoxyCodeLine{    "{}version\_revision"{}: 0}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}id"{}: "{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{a04104_autotoc_md29}{}\doxysubsubsection{4. Subscribing for batch job status changes}\label{a04104_autotoc_md29}

\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}header"{}: \{}
\DoxyCodeLine{    "{}command"{}: "{}CId\_SubscribeToEvents"{},}
\DoxyCodeLine{    "{}version"{}: 2025,}
\DoxyCodeLine{    "{}version\_minor"{}: 10,}
\DoxyCodeLine{    "{}version\_revision"{}: 0}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}events"{}: [ \{ "{}event\_id"{}: "{}EId\_BatchJobStatusChanged"{}, "{}event\_data\_json"{}: "{}\{ \(\backslash\)"{}id\(\backslash\)"{}: \(\backslash\)"{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71\(\backslash\)"{} \}"{} \} ]}
\DoxyCodeLine{\}}

\end{DoxyCode}


For more info on events, check out \mbox{\hyperlink{a04105}{How to use the Event System}}\hypertarget{a04104_autotoc_md30}{}\doxysubsubsection{3. Finishing batch job}\label{a04104_autotoc_md30}
\doxyparagraph*{3.\+1 Completing batch job}


\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}header"{}: \{}
\DoxyCodeLine{    "{}command"{}: "{}CId\_CompleteBatchJob"{}}
\DoxyCodeLine{    "{}version"{}: 2025,}
\DoxyCodeLine{    "{}version\_minor"{}: 10,}
\DoxyCodeLine{    "{}version\_revision"{}: 0}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}id"{}: "{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}


\doxyparagraph*{3.\+2 Canceling batch job}


\begin{DoxyCode}{0}
\DoxyCodeLine{// header}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}header"{}: \{}
\DoxyCodeLine{    "{}command"{}: "{}CId\_CancelBatchJob"{}}
\DoxyCodeLine{    "{}version"{}: 2025,}
\DoxyCodeLine{    "{}version\_minor"{}: 10,}
\DoxyCodeLine{    "{}version\_revision"{}: 0}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{// request body}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}id"{}: "{}741062a2-\/c1fa-\/4d4e-\/bde9-\/bb1058609c71"{}}
\DoxyCodeLine{\}}

\end{DoxyCode}
 