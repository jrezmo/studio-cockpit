<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PTSL C++ Client: How to use Batch Jobs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aaxdoxy.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="pure-purple-avid-logo-solid.png"/></td>
  <td id="projectalign">
   <div id="projectname">PTSL C++ Client<span id="projectnumber">&#160;25.10.0</span>
   </div>
   <div id="projectbrief">Pro Tools Scripting Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li><a href="a04093.html"><span>Commands</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="a04106.html"><span>How&#160;To</span></a></li>
      <li><a href="usergroup0.html"><span>Support</span></a></li>
      <li><a href="modules.html"><span>Release&#160;Notes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">How to use Batch Jobs </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md20"></a>
Overview</h2>
<p >Pro Tools 2025.10 release introduced batch job operations - a set of commands which allow client to wrap a long-running operation into a user-friendly Pro Tools modal dialog and restrict any user actions while it's running, manage progress bar and completion.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Creating batch job</h2>
<p >Use <code>CId_CreateBatchJob</code> command to initiate a Pro Tools modal dialog and start batch job. There are several options that let you customize its behavior:</p><ul>
<li><code>is_cancelable</code> - whether a user-facing batch job modal dialog can be cancelled using a <em>Cancel</em> button.</li>
<li><code>cancel_on_failure</code> - controls if overall operation is considered failed if any sub-command has failed. If this occurs, a <code>BatchJobStatusChanged</code> event is triggerd informing batch job status has changed to <code>BJStatus_Failed</code>.</li>
<li><code>timeout</code> - a value in milliseconds that automatically finishes stale batch job, i.e. that didn't receive commands for specified amount of time. 0 means '<em>no timeout</em>'. If timeout happens, a <code>BatchJobStatusChanged</code> event is triggered informing batch job status has changed to <code>BJStatus_TimedOut</code>.</li>
</ul>
<p >Successful execution of <code>CId_CreateBatchJob</code> request returns batch job ID that can be used in other batch job commands: </p><div class="fragment"><div class="line">// response</div>
<div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;741062a2-c1fa-4d4e-bde9-bb1058609c71&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p >Subsequent commands depend on client needs. You can call other PTSL commands as a part of batch job, like import audio, create clips, spot clips on a timeline, etc. To make PTSL command part of batch job include a <code>batch_job_header</code> into a request header with specified batch job id, like so: </p><div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;header&quot;: {</div>
<div class="line">    ...</div>
<div class="line">    &quot;versioned_request_header_json&quot;: &quot;{ \&quot;batch_job_header\&quot;: { \&quot;id\&quot;: \&quot;741062a2-c1fa-4d4e-bde9-bb1058609c71\&quot; } }&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p> Keep in mind, that while batch job is running, every other command without an appropriate batch job header will be postponed until batch job is finished. The exemptions are:</p><ul>
<li><code>CId_GetTaskStatus</code></li>
<li><code>CId_GetPTSLVersion</code></li>
<li><code>CId_RegisterConnection</code></li>
<li><code>CId_CompleteBatchJob</code></li>
<li><code>CId_GetBatchJobStatus</code></li>
<li><code>CId_SubscribeToEvents</code></li>
<li><code>CId_PollEvents</code></li>
<li><code>CId_UnsubscribeFromEvents</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
Incrementing progress</h2>
<p >When working with batch job, you will likely want to update the modal dialog progress bar value to let the user know about the time remaining for batch job to complete. There is no dedicated command for that, however progress value can be passed in batch job header for any incoming command for ongoing batch job: </p><div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;header&quot;: {</div>
<div class="line">    ...</div>
<div class="line">    &quot;versioned_request_header_json&quot;: &quot;{ \&quot;batch_job_header\&quot;: { \&quot;id\&quot;: \&quot;741062a2-c1fa-4d4e-bde9-bb1058609c71\&quot;, \&quot;progress\&quot;: 15 } }&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p> Once command is finished, progress bar will update its value. Acceptable progress value range is [0, 100] and indicate a percentage of completion and not an increment to current progress. Note that new progress value cannot be lower than current progress value.</p>
<p >One may also want to change progress without doing actual work on Pro Tools side. In this case, use a dummy command call with batch_job_header filled. For example, <code>CId_HostReadyCheck</code> will work for this purpose.</p>
<h2><a class="anchor" id="autotoc_md23"></a>
Completing or canceling batch job</h2>
<p >Once operation is ready to be completed make a <code>CId_CompleteBatchJob</code> request to initiate completion and close modal dialog. Once batch job is completed, a <code>BatchJobStatusChanged</code> event is triggered informing batch job status has changed to <code>BJStatus_Completed</code>. Note that you can not complete batch job that has a running command. </p><div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;command&quot;: &quot;CId_CompleteBatchJob&quot;,</div>
<div class="line">  &quot;version&quot;: 2025,</div>
<div class="line">  &quot;version_minor&quot;: 10,</div>
<div class="line">  &quot;version_revision&quot;: 0</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;741062a2-c1fa-4d4e-bde9-bb1058609c71&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p >If you need to cancel batch job operation, use <code>CId_CancelBatchJob</code> request. Canceling will wait for any ongoing command to be finished and cancel batch job failing any other pending batch job commands. Once batch job is canceled, a <code>BatchJobStatusChanged</code> event is triggered informing batch job status has changed to <code>BJStatus_Canceled</code>.</p>
<h2><a class="anchor" id="autotoc_md24"></a>
Obtaining batch job status</h2>
<p >While batch job exists, you can ask for its current status using <code>CId_GetBatchJobStatus</code> request.</p>
<div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;command&quot;: &quot;CId_GetBatchJobStatus&quot;,</div>
<div class="line">  &quot;version&quot;: 2025,</div>
<div class="line">  &quot;version_minor&quot;: 10,</div>
<div class="line">  &quot;version_revision&quot;: 0</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;741062a2-c1fa-4d4e-bde9-bb1058609c71&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p >Batch job is considered as <code>BJStatus_Pending</code> if it haven't receive any commands to execute yet. When at least one command is added, batch job status is changed to <code>BJStatus_Running</code>. Batch job can finish with one of these statuses: <code>BJStatus_Completed</code>, <code>BJStatus_Canceled</code>, <code>BJStatus_TimedOut</code> or <code>BJStatus_Failed</code>.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Complete example:</h2>
<h3><a class="anchor" id="autotoc_md26"></a>
1. Creating a batch job</h3>
<div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;command&quot;: &quot;CId_CreateBatchJob&quot;,</div>
<div class="line">  &quot;version&quot;: 2025,</div>
<div class="line">  &quot;version_minor&quot;: 10,</div>
<div class="line">  &quot;version_revision&quot;: 0</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{</div>
<div class="line">  &quot;job&quot;: {</div>
<div class="line">    &quot;name&quot;: &quot;A long-running operation&quot;,</div>
<div class="line">    &quot;description&quot;: &quot;This will take a while, Please, wait.&quot;,</div>
<div class="line">    &quot;timeout&quot;: 50000,</div>
<div class="line">    &quot;is_cancelable&quot;: true,</div>
<div class="line">    &quot;cancel_on_failure&quot;: false</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md27"></a>
2 Moving the progress bar</h3>
<h4>2.1 Using a sub-command call</h4>
<div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;header&quot;: {</div>
<div class="line">    &quot;command&quot;: &quot;CId_ExportMix&quot;,</div>
<div class="line">    &quot;version&quot;: 2025,</div>
<div class="line">    &quot;version_minor&quot;: 10,</div>
<div class="line">    &quot;version_revision&quot;: 0,</div>
<div class="line">    &quot;versioned_request_header_json&quot;: &quot;{ \&quot;batch_job_header\&quot;: { \&quot;id\&quot;: \&quot;741062a2-c1fa-4d4e-bde9-bb1058609c71\&quot;, \&quot;progress\&quot;: 15 } }&quot;</div>
<div class="line">  },</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{</div>
<div class="line">  &quot;offline_bounce&quot;: &quot;TB_False&quot;,</div>
<div class="line">  &quot;audio_info&quot;: {},</div>
<div class="line">  &quot;location_info&quot;: {}</div>
<div class="line">}</div>
</div><!-- fragment --><h4>2.2 Using a "fake" call</h4>
<div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;header&quot;: {</div>
<div class="line">    &quot;command&quot;: &quot;CId_HostReadyCheck&quot;,</div>
<div class="line">    &quot;version&quot;: 2025,</div>
<div class="line">    &quot;version_minor&quot;: 10,</div>
<div class="line">    &quot;version_revision&quot;: 0,</div>
<div class="line">    &quot;versioned_request_header_json&quot;: &quot;{ \&quot;batch_job_header\&quot;: { \&quot;id\&quot;: \&quot;741062a2-c1fa-4d4e-bde9-bb1058609c71\&quot;, \&quot;progress\&quot;: 12 } }&quot;</div>
<div class="line">  },</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{ }</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md28"></a>
3. Getting batch job status</h3>
<div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;header&quot;: {</div>
<div class="line">    &quot;command&quot;: &quot;CId_GetBatchJobStatus&quot;,</div>
<div class="line">    &quot;version&quot;: 2025,</div>
<div class="line">    &quot;version_minor&quot;: 10,</div>
<div class="line">    &quot;version_revision&quot;: 0</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;741062a2-c1fa-4d4e-bde9-bb1058609c71&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md29"></a>
4. Subscribing for batch job status changes</h3>
<div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;header&quot;: {</div>
<div class="line">    &quot;command&quot;: &quot;CId_SubscribeToEvents&quot;,</div>
<div class="line">    &quot;version&quot;: 2025,</div>
<div class="line">    &quot;version_minor&quot;: 10,</div>
<div class="line">    &quot;version_revision&quot;: 0</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{</div>
<div class="line">  &quot;events&quot;: [ { &quot;event_id&quot;: &quot;EId_BatchJobStatusChanged&quot;, &quot;event_data_json&quot;: &quot;{ \&quot;id\&quot;: \&quot;741062a2-c1fa-4d4e-bde9-bb1058609c71\&quot; }&quot; } ]</div>
<div class="line">}</div>
</div><!-- fragment --><p >For more info on events, check out <a class="el" href="a04105.html">How to use the Event System</a></p>
<h3><a class="anchor" id="autotoc_md30"></a>
3. Finishing batch job</h3>
<h4>3.1 Completing batch job</h4>
<div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;header&quot;: {</div>
<div class="line">    &quot;command&quot;: &quot;CId_CompleteBatchJob&quot;</div>
<div class="line">    &quot;version&quot;: 2025,</div>
<div class="line">    &quot;version_minor&quot;: 10,</div>
<div class="line">    &quot;version_revision&quot;: 0</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;741062a2-c1fa-4d4e-bde9-bb1058609c71&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h4>3.2 Canceling batch job</h4>
<div class="fragment"><div class="line">// header</div>
<div class="line">{</div>
<div class="line">  &quot;header&quot;: {</div>
<div class="line">    &quot;command&quot;: &quot;CId_CancelBatchJob&quot;</div>
<div class="line">    &quot;version&quot;: 2025,</div>
<div class="line">    &quot;version_minor&quot;: 10,</div>
<div class="line">    &quot;version_revision&quot;: 0</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// request body</div>
<div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;741062a2-c1fa-4d4e-bde9-bb1058609c71&quot;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!--        Copyright 2016, 2018-2019, 2021-2025 by Avid Technology, Inc.        -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
    <div class="FooterLegal">
      Â© 2025 Avid Technology, Inc. All rights reserved. <br />
      This product may be protected by one or more U.S. and non-U.S. patents. Details are available at <a href="https://www.avid.com/patents">www.avid.com/patents</a>.
    </div>
Generated on Fri Oct 17 2025 06:57:27 for PTSL C++ Client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.4
</small></address>
</body>
</html>
